{% extends "storage/base.html" %}

{% block content %}

<div class="card">
  <h5 class="card-header">
    <a href="{% url 'storage:index' %}"> 家 </a>
    <span> / </span>
    {% if parents %}
      {% for parent in parents %}
        <a href="{% url 'storage:storage_detail' parent.id %}">{{ parent.name }}</a>
        <span> / </span>
      {% endfor %}
    {% endif %}
    {{ storage.name }}
  </h5>
  <div class="card-body">
    <h6 class="card-text mb-2 text-muted">
      备注：
      {% if storage.description %}
        {{ storage.description }}
      {% else %}
        无
      {% endif %}
    </h6>
  </div>
  <ul class="list-group list-group-flush">
  {% if storage.storage_set.all %}
    {% for storage in storage.storage_set.all %}
      <li class="list-group-item">
        <a href="{% url 'storage:storage_detail' storage.id %}">
          {{ storage.name }}
          <span class="badge badge-secondary">位置</span>
        </a>
      </li>
    {% endfor %}
  {% endif %}
  {% if storage.item_set.all %}
    {% for item in storage.item_set.all %}
      <li class="list-group-item">
        <a href="{% url 'storage:item_detail' item.id %}">
          {{ item.name }}
          <span class="badge badge-secondary">物品</span>
        </a>
      </li>
    {% endfor %}
  {% endif %}
  </ul>
  <div class="card-body">
    <button class="btn btn-danger" onclick="location.href='{% url 'storage:delete_storage' storage.id %}'">删除</button>
    <button class="btn btn-primary" onclick="location.href='{% url 'storage:change_storage' storage.id %}'">修改</button>
  </div>
</div>

<div class="card">
  <div class="card-header">
    快速添加物品
  </div>
  <div class="card-body">
    <form action="{% url 'storage:add_item' %}" method="post">
      {% include "storage/form_snippet.html" with form=item_form %}
    </form>
  </div>
</div>

<div class="card">
  <div class="card-header">
    快速添加位置
  </div>
  <div class="card-body">
    <form action="{% url 'storage:add_storage' %}" method="post">
      {% include "storage/form_snippet.html" with form=storage_form %}
    </form>
  </div>
</div>

{% endblock %}
